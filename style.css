/* --- START OF FILE style.css --- */

:root {
  --primary-color: #5a2e98;
  --primary-color-darker: #48257a;
  --primary-color-rgb: 90, 46, 152; /* RGB của #5a2e98 */
  --secondary-color: #f0f0f0;
  --accent-color: #ffc107;
  --text-color-dark: #212529;
  --text-color-light: #f8f9fa;
  --background-light: #ffffff;
  --background-dark: #1a1a1a;
  --box-shadow-color: rgba(0, 0, 0, 0.1);
  --border-color: #dee2e6;
  --font-family-primary: 'Montserrat', sans-serif;
  --font-family-secondary: 'Open Sans', sans-serif;
  --gold-color: var(--accent-color);
  --error-color: #dc3545;
  --error-color-rgb: 220, 53, 69; /* RGB của #dc3545 */
  --success-color: #28a745;
  --info-color: #17a2b8;
  --link-color: var(--primary-color);
  --link-hover-color: var(--primary-color-darker);

  --star-color-inactive: #ccc;
  --star-color-active: var(--accent-color);

  --login-bg-start: #ee7752;
  --login-bg-mid1: #e73c7e;
  --login-bg-mid2: #23a6d5;
  --login-bg-end: #23d5ab;
  --login-form-bg-light: rgba(255, 255, 255, 0.95);
  --login-form-bg-dark: rgba(0, 0, 0, 0.75);
  --login-input-bg: rgba(255, 255, 255, 0.1);
  --login-input-focus-bg: rgba(255, 255, 255, 0.2);

  --popup-bg-light: var(--background-light);
  --popup-bg-dark: #2c2c2c; /* Slightly lighter dark popup */

  --header-height-desktop: 70px; /* Adjusted header height */
  --header-height-mobile: 60px;

  --border-radius-sm: 0.25rem;
  --border-radius-md: 0.5rem;
  --border-radius-lg: 0.75rem; /* Slightly smaller lg radius */
  --spacing-xs: 0.25rem;
  --spacing-sm: 0.5rem;
  --spacing-md: 1rem;
  --spacing-lg: 1.5rem;
  --spacing-xl: 2rem;
}

/* --- Global Styles & Resets --- */
*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  scroll-behavior: smooth;
  font-size: 16px;
}

body {
  font-family: var(--font-family-secondary);
  background: linear-gradient(-45deg, var(--login-bg-start), var(--login-bg-mid1), var(--login-bg-mid2), var(--login-bg-end));
  background-size: 400% 400%;
  animation: gradientAnimation 15s ease infinite;
  color: var(--text-color-light);
  line-height: 1.6;
  transition: background-color 0.3s ease, color 0.3s ease;
  overflow-x: hidden;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}

body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.4); /* Slightly less dim */
  z-index: -2;
}

@keyframes gradientAnimation {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.container {
  width: 90%;
  max-width: 1200px;
  margin-left: auto;
  margin-right: auto;
  padding-left: var(--spacing-md);
  padding-right: var(--spacing-md);
}

img {
  max-width: 100%;
  height: auto;
  display: block;
}

a {
  color: var(--link-color);
  text-decoration: none;
  transition: color 0.2s ease;
}
a:hover {
  color: var(--link-hover-color);
  text-decoration: underline;
}
a.link {
    color: var(--link-color);
    text-decoration: underline;
    font-weight: 600;
}
a.link:hover {
    color: var(--link-hover-color);
}

button, .btn {
  cursor: pointer;
  font-family: inherit;
  border: none;
  padding: var(--spacing-sm) var(--spacing-md);
  border-radius: var(--border-radius-sm);
  transition: background-color 0.2s ease, transform 0.1s ease, box-shadow 0.2s ease;
  font-weight: 500;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-sm);
  line-height: 1.5; /* Ensure text is vertically centered */
}
.btn:active {
    transform: translateY(1px);
}
.btn-primary {
  background-color: var(--primary-color);
  color: var(--text-color-light);
}
.btn-primary:hover {
  background-color: var(--primary-color-darker);
  box-shadow: 0 2px 5px rgba(0,0,0,0.15);
}
.btn-secondary {
  background-color: var(--secondary-color);
  color: var(--text-color-dark);
  border: 1px solid var(--border-color);
}
.btn-secondary:hover {
  background-color: #e2e6ea;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}
.btn-icon {
    background: transparent;
    color: #6c757d;
    padding: var(--spacing-xs); /* Smaller padding for icon only */
    font-size: 1.2rem;
    border-radius: 50%; /* Often circular */
    width: 36px; /* Ensure consistent size */
    height: 36px;
}
.btn-icon:hover {
    color: var(--text-color-dark);
    background-color: rgba(0,0,0,0.05);
}

ul { list-style: none; }

h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-family-primary);
  color: var(--text-color-light);
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
  margin-bottom: var(--spacing-md);
  line-height: 1.3;
}
h1 { font-size: 2.2rem; }
h2 { font-size: 1.8rem; text-align: center;}
h3 { font-size: 1.4rem; }

.visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* --- Dark Mode --- */
body.dark-mode {
  background: var(--background-dark);
  color: var(--text-color-light);
}
body.dark-mode::before {
  background-color: rgba(0, 0, 0, 0.55); /* Slightly darker overlay */
}
body.dark-mode .site-header-new {
  background-color: rgba(20, 20, 20, 0.92); /* Darker, more opaque header */
  box-shadow: 0 2px 5px rgba(255, 255, 255, 0.08);
}
body.dark-mode .primary-menu-new > li > a,
body.dark-mode .submenu-new a {
    color: var(--text-color-light);
}
body.dark-mode .primary-menu-new > li > a:hover,
body.dark-mode .submenu-new a:hover,
body.dark-mode .primary-menu-new > li > a.active {
    color: var(--accent-color);
    background-color: rgba(255, 255, 255, 0.05);
}
body.dark-mode .has-submenu-new:hover > a,
body.dark-mode .has-submenu-new.open > a {
    color: var(--accent-color);
    background-color: rgba(255, 255, 255, 0.05);
}
body.dark-mode .primary-menu-new > li > a::after { /* Underline for dark mode */
    background-color: var(--accent-color);
}
body.dark-mode .submenu-new {
    background-color: rgba(35, 35, 35, 0.97); /* Darker submenu */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.35);
    border: 1px solid rgba(255,255,255,0.1);
}
body.dark-mode #search-box {
  background-color: rgba(255, 255, 255, 0.08);
  color: var(--text-color-light);
  border: 1px solid rgba(255, 255, 255, 0.12);
}
body.dark-mode #search-box:focus {
  background-color: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 0 2px var(--accent-color);
  border-color: var(--accent-color);
}
body.dark-mode #search-suggestions {
    background-color: #2a2a2a;
    color: var(--text-color-light);
    border: 1px solid #3f3f3f;
}
body.dark-mode #search-suggestions li:hover {
    background-color: #3f3f3f;
}
body.dark-mode .book,
body.dark-mode .carousel-item {
  background-color: rgba(255, 255, 255, 0.04);
  border: 1px solid rgba(255, 255, 255, 0.08);
  color: var(--text-color-light);
}
body.dark-mode .book h3,
body.dark-mode .carousel-item h3 {
  color: var(--text-color-light);
}
body.dark-mode .form-container-new {
  background: var(--login-form-bg-dark);
}
body.dark-mode .form-input {
    background-color: rgba(255,255,255,0.08);
    color: var(--text-color-light);
    border-color: rgba(255,255,255,0.15);
}
body.dark-mode .form-input:focus {
    background-color: rgba(255,255,255,0.12);
    border-color: var(--accent-color);
    box-shadow: 0 0 0 2px rgba(var(--accent-color-rgb), 0.3); /* Assuming --accent-color-rgb */
}
body.dark-mode .input-label {
    color: rgba(255,255,255,0.65);
    background-color: var(--login-form-bg-dark); /* Match form bg */
}
body.dark-mode .form-input:focus + .input-label,
body.dark-mode .form-input:not(:placeholder-shown) + .input-label,
body.dark-mode .input-label.active {
    color: var(--accent-color);
}
body.dark-mode .popup-content {
    background: var(--popup-bg-dark);
    color: var(--text-color-light);
    border: 1px solid rgba(255,255,255,0.1);
}
body.dark-mode .popup-close-button { color: #bbb; }
body.dark-mode .popup-close-button:hover { color: var(--text-color-light); }
body.dark-mode #ve-chung-toi-popup {
    background-color: rgba(25, 25, 25, 0.97);
    border-color: #444;
}
body.dark-mode #ve-chung-toi-popup h2 { color: var(--gold-color); }
body.dark-mode .site-footer-new {
    background: var(--background-dark);
    border-top: 1px solid rgba(255,255,255,0.08);
}
body.dark-mode .footer-title { color: var(--accent-color); }
body.dark-mode .footer-main p,
body.dark-mode .footer-main a,
body.dark-mode .footer-bottom p {
    color: rgba(255,255,255,0.75);
}
body.dark-mode .footer-main a:hover { color: var(--accent-color); }
body.dark-mode .footer-legal-links a { color: rgba(255,255,255,0.55); }
body.dark-mode .footer-legal-links a:hover { color: var(--accent-color); }
body.dark-mode #newsletter-form input[type="email"] {
    background-color: rgba(255,255,255,0.08);
    border-color: rgba(255,255,255,0.15);
    color: var(--text-color-light);
}
body.dark-mode .btn-icon { color: #adb5bd; }
body.dark-mode .btn-icon:hover {
    color: var(--text-color-light);
    background-color: rgba(255,255,255,0.08);
}
body.dark-mode #starfield-sky { display: block; }


/* --- New Header --- */
.site-header-new {
    background-color: rgba(255, 255, 255, 0.95);
    color: var(--text-color-dark);
    padding: 0 var(--spacing-md);
    box-shadow: 0 1px 3px rgba(0,0,0,0.06);
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
    height: var(--header-height-desktop);
    transition: background-color 0.3s ease, box-shadow 0.3s ease;
}
.header-container-new {
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 100%;
    max-width: 1320px; /* Common container width */
}
.logo-area {
    display: flex;
    align-items: center;
}
.logo-area .nav-link { text-decoration: none; display: flex; align-items: center;}
.logo-img {
    height: 40px; /* Adjusted */
    width: auto;
    margin-right: var(--spacing-sm);
    border-radius: var(--border-radius-sm);
}
.site-title-new {
    font-size: 1.4rem; /* Adjusted */
    font-weight: 600; /* Slightly less bold */
    color: var(--text-color-dark);
    margin: 0;
    text-shadow: none;
}
.site-tagline-new {
    font-size: 0.75rem;
    color: #6c757d;
    margin: 0 0 0 var(--spacing-sm);
    display: none; /* Show on larger screens if desired via media query */
}
body.dark-mode .site-title-new { color: var(--text-color-light); }
body.dark-mode .site-tagline-new { color: rgba(255,255,255,0.6); }

/* Main Navigation New */
.main-navigation-new {
    display: flex;
    align-items: center;
}
.primary-menu-new {
    display: flex;
    align-items: center;
    list-style: none;
    margin: 0;
    padding: 0;
}
.primary-menu-new > li {
    position: relative;
}
.primary-menu-new > li > a {
    display: flex;
    align-items: center;
    padding: 0 var(--spacing-md);
    height: var(--header-height-desktop);
    /* line-height: var(--header-height-desktop); Removed for flex alignment */
    color: var(--text-color-dark);
    text-decoration: none;
    font-weight: 500;
    font-size: 0.9rem; /* Adjusted */
    transition: color 0.2s ease, background-color 0.2s ease;
    position: relative;
}
.primary-menu-new > li > a > i:first-child {
    margin-right: var(--spacing-xs);
    font-size: 0.9em;
}
.primary-menu-new > li > a:hover,
.primary-menu-new > li > a.active {
    color: var(--primary-color);
    background-color: rgba(0,0,0,0.02); /* Softer hover */
}
.primary-menu-new > li > a::after {
    content: '';
    position: absolute;
    left: var(--spacing-md);
    right: var(--spacing-md);
    bottom: 0;
    height: 2px; /* Thinner underline */
    background-color: var(--primary-color);
    transform: scaleX(0);
    transition: transform 0.25s ease-out;
    transform-origin: center;
}
.primary-menu-new > li > a:hover::after,
.primary-menu-new > li > a.active::after {
    transform: scaleX(1);
}

/* Submenu New */
.has-submenu-new .submenu-arrow {
    font-size: 0.65em;
    margin-left: var(--spacing-xs);
    transition: transform 0.2s ease;
}
.has-submenu-new:hover > a,
.has-submenu-new.open > a {
    background-color: rgba(0,0,0,0.02);
    color: var(--primary-color);
}
.has-submenu-new.open .submenu-arrow {
    transform: rotate(180deg);
}
.submenu-new {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    background-color: var(--background-light);
    box-shadow: 0 5px 15px rgba(0,0,0,0.08); /* Softer shadow */
    border-radius: 0 0 var(--border-radius-md) var(--border-radius-md);
    padding: var(--spacing-sm) 0;
    min-width: 230px; /* Slightly wider */
    z-index: 1001;
    list-style: none;
    opacity: 0;
    transform: translateY(8px); /* Start a bit lower */
    transition: opacity 0.2s ease, transform 0.2s ease, visibility 0s 0.2s;
    visibility: hidden;
    pointer-events: none;
}
.has-submenu-new:hover .submenu-new,
.has-submenu-new.open .submenu-new {
    display: block; /* Keep display: block for proper layout */
    opacity: 1;
    transform: translateY(0);
    visibility: visible;
    transition-delay: 0s;
    pointer-events: auto;
}
.submenu-new a {
    display: flex;
    align-items: center;
    padding: var(--spacing-sm) var(--spacing-md);
    color: var(--text-color-dark);
    text-decoration: none;
    font-size: 0.88rem; /* Adjusted */
    transition: color 0.2s ease, background-color 0.2s ease;
    white-space: nowrap;
}
.submenu-new a > i {
    margin-right: var(--spacing-sm);
    width: 1.2em;
    text-align: center;
}
.submenu-new a:hover {
    background-color: rgba(0,0,0,0.04);
    color: var(--primary-color);
}
.category-count {
  font-size: 0.8em;
  color: #6c757d;
  margin-left: var(--spacing-xs);
  font-style: italic;
}
body.dark-mode .category-count {
    color: rgba(255,255,255,0.55);
}

/* Header Actions New */
.header-actions-new {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
}
.search-container-new {
    position: relative;
    display: flex;
    align-items: center;
}
#search-box {
    padding: calc(var(--spacing-sm) - 1px) var(--spacing-md); /* Fine-tune padding */
    padding-right: 38px;
    border-radius: var(--border-radius-md);
    border: 1px solid var(--border-color);
    font-size: 0.85rem; /* Adjusted */
    background-color: var(--background-light);
    color: var(--text-color-dark);
    transition: all 0.25s ease;
    width: 170px; /* Adjusted */
    height: 36px; /* Match button heights */
}
#search-box:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px rgba(var(--primary-color-rgb), 0.2);
    width: 220px;
}
#search-button {
    position: absolute;
    right: 1px; /* Align with border */
    top: 1px;
    bottom: 1px;
    background: transparent;
    border: none;
    color: #6c757d;
    padding: 0 var(--spacing-sm);
    font-size: 0.9rem; /* Adjusted */
    cursor: pointer;
    border-radius: 0 var(--border-radius-md) var(--border-radius-md) 0;
}
#search-button:hover { color: var(--primary-color); }
#search-suggestions {
    position: absolute;
    top: calc(100% + 4px); /* Slightly more space */
    left: 0;
    right: 0;
    background-color: var(--background-light);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-md);
    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.08);
    display: none;
    z-index: 1002;
    padding: var(--spacing-sm) 0;
    list-style: none;
    margin: 0;
    max-height: 240px;
    overflow-y: auto;
}
#search-suggestions li {
    padding: var(--spacing-sm) var(--spacing-md);
    cursor: pointer;
    transition: background-color 0.2s ease;
    color: var(--text-color-dark);
    font-size: 0.85rem;
}
#search-suggestions li:hover { background-color: rgba(0,0,0,0.04); }
#search-suggestions .no-results {
    color: #6c757d; font-style: italic; cursor: default;
}

/* User Info New */
#user-info-new {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-xs) var(--spacing-sm);
    border-radius: var(--border-radius-md);
    background-color: rgba(0,0,0,0.03); /* Softer */
    font-size: 0.8rem; /* Adjusted */
    cursor: pointer;
    transition: background-color 0.2s ease;
    height: 36px;
}
#user-info-new:hover { background-color: rgba(0,0,0,0.06); }
#user-rank .rank-text { font-weight: 600; }
#user-van-xu .van-xu-value { font-weight: bold; color: var(--gold-color); }
#user-rank.rank-hoc-gia-to-mo .rank-text { color: #6c757d; }
#user-rank.rank-thu-sinh .rank-text { color: #28a745; }
body.dark-mode #user-info-new { background-color: rgba(255,255,255,0.08); }
body.dark-mode #user-info-new:hover { background-color: rgba(255,255,255,0.12); }

/* Theme Toggle New */
.theme-toggle-new button {
    background: transparent;
    border: none;
    color: #6c757d;
    font-size: 1.1rem; /* Adjusted */
    padding: var(--spacing-sm); /* Use variable */
    width: 36px;
    height: 36px;
    border-radius: 50%;
    transition: color 0.2s ease, background-color 0.2s ease, transform 0.2s ease;
}
.theme-toggle-new button:hover {
    color: var(--text-color-dark);
    background-color: rgba(0,0,0,0.04);
    transform: rotate(12deg); /* Slightly less rotation */
}
body.dark-mode .theme-toggle-new button { color: #adb5bd; }
body.dark-mode .theme-toggle-new button:hover {
    color: var(--text-color-light);
    background-color: rgba(255,255,255,0.08);
}

/* Auth Actions New */
.auth-actions-new { position: relative; }
#login-button-nav { font-size: 0.85rem; height: 36px; }

.user-dropdown-new #user-avatar-button {
    background: transparent;
    border: none;
    font-size: 1.6rem; /* Adjusted */
    color: #495057;
    padding: var(--spacing-xs);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
}
.user-dropdown-new #user-avatar-button:hover { background-color: rgba(0,0,0,0.04); }
body.dark-mode .user-dropdown-new #user-avatar-button { color: #adb5bd; }
body.dark-mode .user-dropdown-new #user-avatar-button:hover { background-color: rgba(255,255,255,0.08); }

.dropdown-menu-new {
    display: none;
    position: absolute;
    top: calc(100% + 6px); /* More space */
    right: 0;
    background-color: var(--background-light);
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    border-radius: var(--border-radius-md);
    padding: var(--spacing-sm) 0;
    min-width: 190px; /* Adjusted */
    z-index: 1001;
    list-style: none;
    opacity: 0;
    transform: translateY(8px);
    transition: opacity 0.2s ease, transform 0.2s ease, visibility 0s 0.2s;
    visibility: hidden;
}
.user-dropdown-new.open .dropdown-menu-new {
    display: block;
    opacity: 1;
    transform: translateY(0);
    visibility: visible;
    transition-delay: 0s;
}
.dropdown-menu-new li a,
.dropdown-menu-new li button {
    display: flex;
    align-items: center;
    width: 100%;
    padding: var(--spacing-sm) var(--spacing-md);
    text-align: left;
    background: none;
    border: none;
    color: var(--text-color-dark);
    font-size: 0.88rem;
    transition: background-color 0.2s ease, color 0.2s ease;
    white-space: nowrap;
}
.dropdown-menu-new li a:hover,
.dropdown-menu-new li button:hover {
    background-color: rgba(0,0,0,0.04);
    color: var(--primary-color);
}
.dropdown-menu-new li a i,
.dropdown-menu-new li button i {
    margin-right: var(--spacing-sm);
    width: 1.2em;
    text-align: center;
}
body.dark-mode .dropdown-menu-new {
    background-color: #2a2a2a;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    border: 1px solid rgba(255,255,255,0.1);
}
body.dark-mode .dropdown-menu-new li a,
body.dark-mode .dropdown-menu-new li button {
    color: var(--text-color-light);
}
body.dark-mode .dropdown-menu-new li a:hover,
body.dark-mode .dropdown-menu-new li button:hover {
    background-color: rgba(255,255,255,0.08);
    color: var(--accent-color);
}

/* Mobile Navigation Toggle */
.mobile-nav-toggle {
    display: none;
    background: transparent;
    border: none;
    font-size: 1.4rem; /* Adjusted */
    color: var(--text-color-dark);
    padding: var(--spacing-sm);
    margin-left: auto;
    width: 40px; /* Ensure consistent tap target */
    height: 40px;
}
body.dark-mode .mobile-nav-toggle { color: var(--text-color-light); }


/* --- Main Content Area --- */
.main-content-new {
  padding-top: var(--header-height-desktop);
  flex-grow: 1;
  position: relative; /* For loading overlay context */
}
.loading-overlay {
  position: absolute; /* Cover only main content if desired, or fixed for viewport */
  top: 0; left: 0; width: 100%; height: 100%;
  background-color: rgba(255,255,255,0.7);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 999;
  opacity: 0;
  transition: opacity 0.3s ease;
  pointer-events: none;
}
body.dark-mode .loading-overlay { background-color: rgba(0,0,0,0.7); }
.loading-overlay.active { opacity: 1; pointer-events: auto; }
.loading-spinner {
  border: 4px solid #f3f3f3;
  border-top: 4px solid var(--primary-color);
  border-radius: 50%;
  width: 40px; height: 40px;
  animation: spin 0.8s linear infinite;
}
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

.content-section {
    display: none;
    opacity: 0;
    padding: var(--spacing-lg) 0;
    animation: fadeIn 0.4s ease-out forwards;
}
.content-section.active { display: block; opacity: 1; }
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

/* --- Trang Chủ Specific --- */
.social-icons {
  display: flex;
  justify-content: center;
  gap: var(--spacing-lg);
  margin-bottom: var(--spacing-xl);
  margin-top: var(--spacing-lg);
}
.icon {
  width: 48px; /* Adjusted */
  height: 48px;
  border-radius: 50%;
  transition: all 0.25s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  display: flex;
  justify-content: center;
  align-items: center;
  text-decoration: none;
  font-size: 20px;
  color: white;
  box-shadow: 0 5px 10px rgba(0,0,0,0.12), 0 2px 2px rgba(0,0,0,0.06);
}
.icon:hover {
  transform: translateY(-3px) scale(1.06);
  box-shadow: 0 8px 16px rgba(0,0,0,0.18), 0 5px 5px rgba(0,0,0,0.12);
}
.icon-facebook { background: #1877f2; }
.icon-tiktok { background: #010101; }
.icon-youtube { background: #ff0000; }


#new-books, #featured-books { margin-bottom: var(--spacing-xl); }
.new-books-carousel {
  position: relative;
  overflow: hidden;
  width: 100%;
  max-width: 860px;
  margin: var(--spacing-md) auto;
  border-radius: var(--border-radius-lg);
  box-shadow: 0 4px 12px rgba(0,0,0,0.12);
}
.new-books-inner { display: flex; transition: transform 0.45s ease-in-out; }
.new-book-item {
  flex: 0 0 100%;
  position: relative;
  aspect-ratio: 16 / 7.5; /* Adjusted aspect ratio */
  cursor: pointer;
  overflow: hidden;
}
.new-book-item img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.35s ease; }
.new-book-item:hover img { transform: scale(1.025); }
.new-book-overlay {
  position: absolute;
  bottom: 0; left: 0; right: 0;
  background: linear-gradient(to top, rgba(0,0,0,0.8) 15%, rgba(0,0,0,0) 100%);
  color: white;
  padding: var(--spacing-md);
  text-shadow: 1px 1px 2px rgba(0,0,0,0.45);
}
.new-book-overlay h3 {
  margin: 0 0 var(--spacing-xs) 0; font-size: 1.4em; color: #fff; text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
}
.new-book-overlay p {
  margin: 0; font-size: 0.85em; color: rgba(255,255,255,0.85);
}

.carousel {
  display: flex;
  overflow-x: auto;
  gap: var(--spacing-md);
  padding: var(--spacing-sm) var(--spacing-xs) var(--spacing-md);
  scroll-behavior: smooth;
  scroll-snap-type: x mandatory;
}
.carousel::-webkit-scrollbar { height: 5px; }
.carousel::-webkit-scrollbar-track { background: rgba(0,0,0,0.04); border-radius: 2.5px; }
.carousel::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.15); border-radius: 2.5px; }
body.dark-mode .carousel::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.15); }

.carousel-item {
  flex: 0 0 190px;
  scroll-snap-align: start;
}

.book-container {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(175px, 1fr));
  gap: var(--spacing-lg);
  margin-bottom: var(--spacing-xl);
}
.book, .carousel-item { /* Shared style */
  background-color: var(--background-light);
  border: 1px solid var(--border-color);
  border-radius: var(--border-radius-md);
  box-shadow: 0 2px 6px var(--box-shadow-color);
  text-align: center;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  cursor: pointer;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  color: var(--text-color-dark);
  padding: var(--spacing-sm); /* Uniform padding */
}
.book:hover, .carousel-item:hover {
  transform: translateY(-4px);
  box-shadow: 0 6px 12px rgba(0,0,0,0.1);
}
.book-image {
  width: 100%;
  aspect-ratio: 2 / 2.8; /* Slightly taller */
  object-fit: cover;
  border-radius: var(--border-radius-sm);
  margin-bottom: var(--spacing-sm);
}
.book-title-container {
  min-height: 2.6em; /* Allow 2 lines */
  margin-bottom: var(--spacing-xs);
  display: flex;
  align-items: center;
  justify-content: center;
}
.book h3 {
  font-size: 1em;
  line-height: 1.3;
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  margin: 0;
  color: var(--text-color-dark);
  text-shadow: none;
}
.book-publication-date {
  font-size: 0.75em; color: #6c757d; margin-bottom: var(--spacing-xs);
}
.ratings { /* No changes needed */ }
.button-group { /* No changes needed */ }


.pagination {
  display: flex;
  justify-content: center;
  align-items: center;
  margin-top: var(--spacing-xl);
  gap: var(--spacing-sm);
}
.pagination button {
  padding: 0.55rem 0.9rem; /* Adjusted */
  border: 1px solid var(--border-color);
  border-radius: var(--border-radius-sm);
  background-color: var(--background-light);
  color: var(--text-color-dark);
  font-size: 0.85rem;
}
.pagination button:hover:not(:disabled) {
  background-color: var(--primary-color);
  color: var(--text-color-light);
  border-color: var(--primary-color);
}
.pagination button:disabled {
  background-color: #e9ecef; color: #6c757d; cursor: default; opacity: 0.65;
}
.pagination button.active {
  background-color: var(--primary-color);
  color: var(--text-color-light);
  border-color: var(--primary-color);
  font-weight: bold;
}

/* Auth Forms (Login/Register) */
.auth-section {
  display: none;
  justify-content: center;
  align-items: center;
  min-height: calc(100vh - var(--header-height-desktop));
  padding: var(--spacing-xl) var(--spacing-md);
}
.auth-section.active { display: flex; }

.form-container-new {
  background: var(--login-form-bg-light);
  padding: var(--spacing-xl);
  border-radius: var(--border-radius-lg);
  text-align: center;
  box-shadow: 0 4px 15px rgba(0,0,0,0.08);
  width: 100%;
  max-width: 400px; /* Slightly narrower */
  color: var(--text-color-dark);
}
.form-title {
  font-size: 1.7em; margin-bottom: var(--spacing-sm); color: var(--text-color-dark); text-shadow: none;
}
.form-subtitle {
  font-size: 0.95em; margin-bottom: var(--spacing-lg); color: #495057;
}
.input-group {
  position: relative;
  margin-bottom: var(--spacing-lg);
  text-align: left;
}
.form-input {
  width: 100%;
  padding: var(--spacing-md);
  border: 1px solid var(--border-color);
  border-radius: var(--border-radius-sm);
  background-color: var(--background-light);
  color: var(--text-color-dark);
  font-size: 0.95em; /* Adjusted */
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
  height: 44px; /* Consistent height */
}
.form-input:focus {
  outline: none;
  border-color: var(--primary-color);
  box-shadow: 0 0 0 0.18rem rgba(var(--primary-color-rgb), 0.22); /* Adjusted shadow */
}
.form-input::placeholder { color: #868e96; } /* Lighter placeholder */

.input-label {
  position: absolute;
  left: var(--spacing-md);
  top: 50%; /* Start centered vertically */
  transform: translateY(-50%);
  color: #495057;
  pointer-events: none;
  transition: all 0.18s ease-out;
  background-color: var(--background-light);
  padding: 0 var(--spacing-xs);
  font-size: 0.95em;
}
.form-input:focus + .input-label,
.form-input:not(:placeholder-shown) + .input-label,
.input-label.active {
  top: 0;
  font-size: 0.75em; /* Smaller when floated */
  color: var(--primary-color);
  transform: translateY(-50%) scale(0.9); /* Scale down slightly */
}
.error-message {
  display: none; color: var(--error-color); font-size: 0.8em; margin-top: var(--spacing-xs);
}
.input-group.error .form-input { border-color: var(--error-color); }
.input-group.error .form-input:focus { box-shadow: 0 0 0 0.18rem rgba(var(--error-color-rgb), 0.22); }
.input-group.error .error-message { display: block; }

.password-input-group .password-toggle-button {
  position: absolute;
  right: var(--spacing-sm);
  top: 50%;
  transform: translateY(-50%);
  background: none; border: none; color: #6c757d; font-size: 1.05em; cursor: pointer;
}
.form-options {
    display: flex; justify-content: space-between; align-items: center;
    margin-bottom: var(--spacing-lg); font-size: 0.85em;
}
.remember-me-container { display: flex; align-items: center; }
.remember-me-container input[type="checkbox"] { margin-right: var(--spacing-xs); transform: scale(0.9); }
.forgot-password-link { color: var(--link-color); }
.forgot-password-link:hover { color: var(--link-hover-color); }

.btn-full-width { width: 100%; padding-top: calc(var(--spacing-sm) + 2px); padding-bottom: calc(var(--spacing-sm) + 2px); font-size: 1em;}

.social-login-divider {
  margin: var(--spacing-lg) 0; color: #6c757d; font-size: 0.85em; text-align: center;
  position: relative; text-transform: uppercase;
}
.social-login-divider::before, .social-login-divider::after {
    content: ''; position: absolute; top: 50%; width: 33%; height: 1px; background-color: var(--border-color);
}
.social-login-divider::before { left: 0; }
.social-login-divider::after { right: 0; }
body.dark-mode .social-login-divider { color: rgba(255,255,255,0.55); }
body.dark-mode .social-login-divider::before, body.dark-mode .social-login-divider::after { background-color: rgba(255,255,255,0.25); }

.social-buttons {
  display: flex; flex-direction: column; gap: var(--spacing-sm); margin-bottom: var(--spacing-lg);
}
.social-button {
  width: 100%; padding: var(--spacing-sm) var(--spacing-md); border: 1px solid var(--border-color);
  border-radius: var(--border-radius-sm); background-color: transparent; color: var(--text-color-dark);
  font-weight: 500; height: 40px; /* Consistent height */
}
.social-button.google { border-color: #DB4437; color: #DB4437; }
.social-button.google:hover { background-color: rgba(219,68,55,0.04); }
.social-button.facebook { border-color: #4267B2; color: #4267B2; }
.social-button.facebook:hover { background-color: rgba(66,103,178,0.04); }
body.dark-mode .social-button { color: var(--text-color-light); border-color: rgba(255,255,255,0.25);}
body.dark-mode .social-button.google:hover { background-color: rgba(219,68,55,0.12); }
body.dark-mode .social-button.facebook:hover { background-color: rgba(66,103,178,0.12); }

.form-footer {
  font-size: 0.9em; color: #495057; text-align: center; margin-top: var(--spacing-lg);
}
body.dark-mode .form-footer { color: rgba(255,255,255,0.65); }


#yeu-thich h2, #lich-su-mua-hang h2, #lien-he h2 {
    color: var(--text-color-light);
    text-shadow: 1px 1px 2px rgba(0,0,0,0.35);
}
body.dark-mode #yeu-thich h2,
body.dark-mode #lich-su-mua-hang h2,
body.dark-mode #lien-he h2 { color: var(--text-color-light); }

#empty-favorites, #empty-purchase-history {
    color: rgba(255,255,255,0.75); text-align: center;
    padding: var(--spacing-xl) 0; font-style: italic;
}
body.dark-mode #empty-favorites, body.dark-mode #empty-purchase-history { color: rgba(255,255,255,0.6); }

.table-responsive { overflow-x: auto; margin-top: var(--spacing-md); }
#purchase-history-table {
    width: 100%; border-collapse: collapse;
    background-color: rgba(0,0,0,0.02);
    border-radius: var(--border-radius-md);
    overflow: hidden; font-size: 0.88rem;
}
#purchase-history-table th, #purchase-history-table td {
    padding: var(--spacing-sm) var(--spacing-md); text-align: left;
    border-bottom: 1px solid rgba(255,255,255,0.08);
}
#purchase-history-table th {
    background-color: rgba(255,255,255,0.05); font-weight: 600; color: var(--text-color-light);
}
#purchase-history-table td { color: rgba(255,255,255,0.85); }
#purchase-history-table tr:last-child td { border-bottom: none; }
#purchase-history-table tr:hover td { background-color: rgba(255,255,255,0.04); }

body.dark-mode #purchase-history-table {
    background-color: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.08);
}
body.dark-mode #purchase-history-table th {
    background-color: rgba(255,255,255,0.08); color: var(--text-color-light);
}
body.dark-mode #purchase-history-table td { border-bottom-color: rgba(255,255,255,0.12); }
body.dark-mode #purchase-history-table tr:hover td { background-color: rgba(255,255,255,0.06); }


#lien-he {
    text-align: center; padding: var(--spacing-lg);
    background-color: rgba(0,0,0,0.04); border-radius: var(--border-radius-lg);
    color: rgba(255,255,255,0.85);
}
#lien-he p { margin-bottom: var(--spacing-sm); }
#lien-he a { color: var(--accent-color); font-weight: 600; }
#lien-he a:hover { color: #ffd042; }
.contact-info-list { list-style: none; padding: 0; margin-top: var(--spacing-md);}
.contact-info-list li { margin-bottom: var(--spacing-xs); font-size: 1rem; }
.contact-info-list i { margin-right: var(--spacing-sm); color: var(--accent-color); }
body.dark-mode #lien-he { background-color: rgba(255,255,255,0.04); }


#book-details .book-details-content {
  display: flex; gap: var(--spacing-xl);
  background-color: var(--popup-bg-light);
  padding: var(--spacing-xl); border-radius: var(--border-radius-lg);
  box-shadow: 0 4px 18px rgba(0,0,0,0.1); color: var(--text-color-dark);
  position: relative;
}
#close-book-details-button {
  position: absolute; top: var(--spacing-md); right: var(--spacing-md);
  background: none; border: none; font-size: 1.5rem; color: #868e96;
  cursor: pointer; transition: color 0.2s ease, transform 0.2s ease;
  width: 32px; height: 32px; display: flex; align-items: center; justify-content: center;
}
#close-book-details-button:hover { color: var(--text-color-dark); transform: scale(1.08) rotate(90deg); }
.book-cover img {
    border-radius: var(--border-radius-sm); box-shadow: 0 3px 7px rgba(0,0,0,0.12);
    margin-bottom: var(--spacing-sm);
}
.book-info h2 { color: var(--primary-color); text-shadow: none; margin-bottom: var(--spacing-xs);}
.book-info p { margin-bottom: var(--spacing-xs); color: #495057; font-size: 0.92rem; }
.book-info p .info-value { color: var(--text-color-dark); font-weight: 500; }
.book-info p > i { margin-right: var(--spacing-xs); color: var(--primary-color); width: 1.1em; text-align: center;}

.book-actions {
    display: flex; flex-wrap: wrap; gap: var(--spacing-sm); margin: var(--spacing-md) 0; align-items: center;
}
.book-description-container { margin-top: var(--spacing-md); }
.book-description-container h3 {
    font-size: 1.15em; color: var(--text-color-dark); text-shadow: none;
    margin-bottom: var(--spacing-xs); display: flex; align-items: center;
}
.book-description-container h3 i { margin-right: var(--spacing-xs); color: var(--primary-color); }
#book-details-description { font-size: 0.95rem; line-height: 1.7; color: #343a40; }


.comments-section { margin-top: var(--spacing-lg); border-top: 1px solid var(--border-color); padding-top: var(--spacing-lg); }
.comments-section h3 {
    font-size: 1.15em; color: var(--text-color-dark); text-shadow:none;
    margin-bottom: var(--spacing-sm); display: flex; align-items: center;
}
.comments-section h3 i { margin-right: var(--spacing-xs); color: var(--primary-color); }
#book-details-comments-list {
  margin-bottom: var(--spacing-md); max-height: 240px; overflow-y: auto; padding-right: var(--spacing-sm);
}
#book-details-comments-list p {
  background-color: #f8f9fa; padding: var(--spacing-sm); margin-bottom: var(--spacing-sm);
  border-radius: var(--border-radius-sm); border: 1px solid #e9ecef; font-size: 0.88rem;
}
.comment-form { display: flex; flex-direction: column; gap: var(--spacing-sm); }
#book-details-comment-box {
  width: 100%; padding: var(--spacing-sm); border: 1px solid var(--border-color);
  border-radius: var(--border-radius-sm); resize: vertical; min-height: 70px; font-size: 0.92rem;
}
#book-details-comment-submit { align-self: flex-end; }

body.dark-mode #book-details .book-details-content {
    background-color: var(--popup-bg-dark); color: var(--text-color-light);
    border: 1px solid rgba(255,255,255,0.08);
}
body.dark-mode #close-book-details-button { color: #bbb; }
body.dark-mode #close-book-details-button:hover { color: var(--text-color-light); }
body.dark-mode .book-info h2 { color: var(--accent-color); }
body.dark-mode .book-info p { color: rgba(255,255,255,0.75); }
body.dark-mode .book-info p .info-value { color: var(--text-color-light); }
body.dark-mode .book-info p > i { color: var(--accent-color); }
body.dark-mode .book-description-container h3, body.dark-mode .comments-section h3 { color: var(--text-color-light); }
body.dark-mode .book-description-container h3 i, body.dark-mode .comments-section h3 i { color: var(--accent-color); }
body.dark-mode #book-details-description { color: rgba(255,255,255,0.85); }
body.dark-mode #book-details-comments-list p { background-color: rgba(255,255,255,0.04); border-color: rgba(255,255,255,0.12); }
body.dark-mode #book-details-comment-box { background-color: rgba(0,0,0,0.18); color: var(--text-color-light); border-color: rgba(255,255,255,0.18); }


/* --- Footer New --- */
.site-footer-new {
    background-color: #f1f3f5; /* Lighter footer */
    color: #495057;
    padding: var(--spacing-xl) 0 var(--spacing-md);
    font-size: 0.88rem; /* Adjusted */
    border-top: 1px solid var(--border-color);
}
.footer-main {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); /* Adjusted minmax */
    gap: var(--spacing-lg);
    margin-bottom: var(--spacing-lg);
}
.footer-section .footer-title {
    font-size: 1.05rem; /* Adjusted */
    margin-bottom: var(--spacing-md);
    color: var(--text-color-dark);
    font-weight: 600;
    text-shadow: none;
    display: flex;
    align-items: center;
}
.footer-section .footer-title i {
    margin-right: var(--spacing-sm);
    color: var(--primary-color);
    font-size: 1.05em;
}
.footer-section p { line-height: 1.65; margin-bottom: var(--spacing-sm); }
.footer-section ul { list-style: none; padding: 0; }
.footer-section ul li { margin-bottom: var(--spacing-xs); }
.footer-section ul li a { color: #495057; text-decoration: none; }
.footer-section ul li a:hover { color: var(--primary-color); text-decoration: underline; }
.footer-section ul li a i { margin-right: var(--spacing-xs); }

#newsletter-form { display: flex; gap: var(--spacing-sm); margin-top: var(--spacing-sm); }
#newsletter-form input[type="email"] {
    flex-grow: 1; padding: var(--spacing-sm); border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm); font-size: 0.85rem; height: 38px;
}
#newsletter-form button { padding: var(--spacing-sm) var(--spacing-md); flex-shrink: 0; height: 38px; }

.social-icons-footer { display: flex; gap: var(--spacing-sm); }
.social-icons-footer .icon {
    width: 34px; height: 34px; font-size: 16px; /* Smaller footer icons */
    box-shadow: 0 1px 3px rgba(0,0,0,0.06);
}
.social-icons-footer .icon:hover {
    transform: translateY(-2px) scale(1.08); box-shadow: 0 3px 6px rgba(0,0,0,0.1);
}

.footer-bottom {
    text-align: center; border-top: 1px solid var(--border-color);
    padding-top: var(--spacing-md); font-size: 0.82rem; color: #6c757d;
}
.footer-bottom p { margin-bottom: var(--spacing-xs); }
.footer-legal-links a { color: #6c757d; margin: 0 var(--spacing-xs); }
.footer-legal-links a:hover { color: var(--primary-color); }
.footer-legal-links .separator { margin: 0 var(--spacing-xs); }


/* --- Popups (Shared Styles) --- */
.popup-overlay {
  display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  background-color: rgba(0,0,0,0.55); z-index: 1002; justify-content: center;
  align-items: center; opacity: 0; transition: opacity 0.25s ease;
  padding: var(--spacing-md); overflow-y: auto;
}
.popup-overlay.active { display: flex; opacity: 1; }
.popup-content {
  background: var(--popup-bg-light); color: var(--text-color-dark);
  padding: var(--spacing-lg); border-radius: var(--border-radius-lg);
  box-shadow: 0 4px 18px rgba(0,0,0,0.15); width: 90%;
  max-width: 480px; /* Adjusted default max-width */
  position: relative; transform: scale(0.96) translateY(10px); opacity: 0;
  transition: transform 0.25s ease, opacity 0.25s ease;
  text-align: center;
}
.popup-overlay.active .popup-content { transform: scale(1) translateY(0); opacity: 1; }
.popup-close-button {
  position: absolute; top: var(--spacing-sm); right: var(--spacing-sm);
  background: none; border: none; font-size: 1.4rem; color: #868e96;
  cursor: pointer; padding: var(--spacing-xs); line-height: 1;
  transition: color 0.2s ease, transform 0.2s ease;
  width: 32px; height: 32px; display: flex; align-items: center; justify-content: center;
}
.popup-close-button:hover { color: var(--text-color-dark); transform: scale(1.08) rotate(90deg); }
.popup-content h2 {
    font-size: 1.4em; margin-bottom: var(--spacing-md); color: var(--primary-color); text-shadow: none;
}
.popup-content p { font-size: 0.95rem; margin-bottom: var(--spacing-sm); color: #495057; }
.popup-actions {
    display: flex; justify-content: center; gap: var(--spacing-sm); margin-top: var(--spacing-lg);
}

/* Payment Popup Specifics */
/* #payment-popup { max-width: 480px; } Already set in .popup-content */
#payment-popup .account-info { margin-bottom: var(--spacing-md); }
#payment-popup .account-info p { font-size: 1em; }
#payment-popup .account-info .account-number {
    font-weight: bold; font-size: 1.25rem; color: var(--primary-color); user-select: all;
}
#payment-popup .qr-code { margin: var(--spacing-sm) auto var(--spacing-md); max-width: 170px; }
#payment-popup .qr-code img { border: 1px solid var(--border-color); border-radius: var(--border-radius-sm); }
#payment-popup .payment-instructions { margin-bottom: var(--spacing-md); text-align: left; }
#payment-popup .payment-instructions p { font-size: 0.9rem; }
#payment-content-template.code-block {
    background-color: #e9ecef; color: var(--text-color-dark); padding: var(--spacing-sm);
    border-radius: var(--border-radius-sm); display: block; margin-bottom: var(--spacing-sm);
    font-family: 'Courier New', Courier, monospace; word-break: break-all; user-select: all;
    font-size: 0.85rem;
}
#reader-gmail.form-input { margin-bottom: var(--spacing-sm); height: 40px; font-size: 0.9rem; }
#payment-popup .note { font-size: 0.8rem; color: #6c757d; margin-top: var(--spacing-md); }

/* Ve Chung Toi Popup */
#ve-chung-toi-popup {
    max-width: 680px; text-align: left; font-family: 'Georgia', serif;
    background-color: #fdfaf6; border: 1px solid #d1c7ac; color: #5d533c;
}
#ve-chung-toi-popup h2 { color: #8b5a2b; font-variant: small-caps; letter-spacing: 0.5px; text-align: center;}
#ve-chung-toi-popup p { font-size: 1.05em; line-height: 1.75; }

/* Newsletter Notification Popup */
#newsletter-notification-popup h2 { font-size: 1.3em; }
#newsletter-notification-popup p a { color: var(--primary-color); font-weight: 600; }


/* Starfield (No changes needed) */
#starfield-sky { /* ... */ }
.starfield-star { /* ... */ }
.starfield-shooting-star { /* ... */ }
@keyframes starfield-twinkle { /* ... */ }
@keyframes starfield-shooting-star-flight { /* ... */ }


#scrollToTop {
  position: fixed; bottom: var(--spacing-lg); right: var(--spacing-lg);
  background-color: rgba(var(--primary-color-rgb), 0.75);
  color: var(--text-color-light); border: none; width: 42px; height: 42px;
  border-radius: 50%; cursor: pointer; display: none;
  transition: all 0.25s ease; z-index: 998;
  box-shadow: 0 2px 6px rgba(0,0,0,0.18); font-size: 1.1rem; line-height: 1;
}
#scrollToTop:hover {
  background-color: var(--primary-color); transform: scale(1.04) translateY(-1px);
}

.simple-notification {
    position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%) translateY(100%); /* Start off-screen */
    background-color: #282c34; /* Darker default */ color: white; padding: 12px 22px; /* More padding */
    border-radius: var(--border-radius-md); box-shadow: 0 3px 12px rgba(0,0,0,0.22);
    z-index: 2000; opacity: 0; transition: opacity 0.25s ease, transform 0.25s ease;
    pointer-events: none; font-size: 0.9rem; min-width: 280px; text-align: center;
}
.simple-notification.show {
    opacity: 1; transform: translateX(-50%) translateY(0); pointer-events: auto;
}
.simple-notification.error { background-color: var(--error-color); }
.simple-notification.success { background-color: var(--success-color); }
.simple-notification.info { background-color: var(--info-color); }


/* --- Media Queries --- */
@media (max-width: 992px) {
    .site-header-new { height: auto; }
    .header-container-new {
        flex-wrap: wrap;
        padding-top: var(--spacing-xs);
        padding-bottom: var(--spacing-xs);
        position: relative; /* For mobile menu absolute positioning */
    }
    .logo-area { order: 1; flex-basis: auto; /* Allow it to shrink */ margin-right: auto; /* Push toggle to right */ }
    .site-tagline-new { display: none; }
    .header-actions-new {
        order: 3;
        flex-basis: 100%;
        padding-top: var(--spacing-sm);
        border-top: 1px solid var(--border-color);
        margin-top: var(--spacing-xs);
        justify-content: space-around; /* Distribute actions */
    }
    body.dark-mode .header-actions-new { border-top-color: rgba(255,255,255,0.1); }

    #search-box { width: 160px; }
    #search-box:focus { width: 200px; }

    .main-navigation-new { order: 2; /* Nav toggle to the right of logo */ }
    .mobile-nav-toggle { display: flex; /* Changed to flex */ align-items: center; justify-content: center;}
    .primary-menu-new {
        display: none;
        flex-direction: column;
        position: absolute;
        top: 100%; /* Position below the entire header wrap */
        left: 0;
        right: 0;
        background-color: var(--background-light);
        box-shadow: 0 4px 8px rgba(0,0,0,0.08);
        padding: var(--spacing-sm) 0;
        z-index: 999;
        border-top: 1px solid var(--border-color);
    }
    .main-navigation-new.open .primary-menu-new { display: flex; }
    .primary-menu-new > li { width: 100%; }
    .primary-menu-new > li > a {
        height: auto; line-height: normal; padding: var(--spacing-md);
        border-bottom: 1px solid var(--border-color); justify-content: space-between;
    }
    .primary-menu-new > li:last-child > a { border-bottom: none; }
    .primary-menu-new > li > a::after { display: none; }
    .submenu-new {
        position: static; box-shadow: none; border-radius: 0;
        padding-left: var(--spacing-md); background-color: rgba(0,0,0,0.015);
        opacity: 1; transform: none; display: none; /* Still hidden by default */
        border-top: 1px solid var(--border-color);
    }
    .has-submenu-new.open .submenu-new { display: block; }
    .submenu-new a { padding: var(--spacing-sm) var(--spacing-md); }
    .primary-menu-new .mobile-only { display: list-item !important; } /* Ensure it shows */

    body.dark-mode .primary-menu-new {
        background-color: var(--popup-bg-dark); border-top-color: rgba(255,255,255,0.08);
    }
    body.dark-mode .primary-menu-new > li > a { border-bottom-color: rgba(255,255,255,0.08); }
    body.dark-mode .submenu-new {
        background-color: rgba(255,255,255,0.04); border-top-color: rgba(255,255,255,0.08);
    }

    .main-content-new { padding-top: 60px; /* Fallback if header doesn't wrap */ }
    /* JS will adjust padding-top for .main-content-new based on actual header height */
    .book-container { grid-template-columns: repeat(auto-fill, minmax(155px, 1fr)); gap: var(--spacing-md); }
}

@media (max-width: 768px) {
    .site-title-new { font-size: 1.2rem; }
    .logo-img { height: 36px; }
    .header-actions-new { flex-wrap: wrap; justify-content: center; gap: var(--spacing-xs); }
    .search-container-new { flex-basis: 100%; margin-bottom: var(--spacing-sm); order: 1; }
    #search-box { width: 100%; }
    #search-box:focus { width: 100%; }
    #user-info-new { order: 2; margin: var(--spacing-xs) 0; }
    .theme-toggle-new { order: 3; }
    .auth-actions-new { order: 4; }

    .book-container { grid-template-columns: repeat(2, 1fr); }
    .carousel-item { flex-basis: 150px; }
    .social-icons .icon { width: 38px; height: 38px; font-size: 17px;}
    .form-container-new { padding: var(--spacing-lg); }
    h1 { font-size: 1.7rem; } h2 { font-size: 1.4rem; } h3 { font-size: 1.15rem; }

    .footer-main { grid-template-columns: 1fr; text-align: center; }
    .footer-section ul { align-items: center; }
    .social-icons-footer { justify-content: center; }
    #newsletter-form { flex-direction: column; }
}

@media (max-width: 480px) {
    .container { padding-left: var(--spacing-sm); padding-right: var(--spacing-sm); }
    .site-title-new { font-size: 1.05rem; }
    .logo-img { height: 32px; }
    .header-actions-new { gap: var(--spacing-xs); }
    #user-info-new { font-size: 0.75rem; padding: var(--spacing-xs); gap: var(--spacing-xs); height: 32px; }
    .theme-toggle-new button, .user-dropdown-new #user-avatar-button, #login-button-nav { height: 32px; width: 32px; font-size: 0.9em; padding: var(--spacing-xs); }
     #login-button-nav { width: auto; padding: var(--spacing-xs) var(--spacing-sm); }


    .book-container { grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); gap: var(--spacing-sm); }
    .book, .carousel-item { padding: var(--spacing-sm); }
    .book h3 { font-size: 0.9em; }
    .book-publication-date { font-size: 0.7em; }
    .pagination button { padding: 0.45rem 0.7rem; font-size: 0.8rem; }
    .popup-content { padding: var(--spacing-md); }
    .popup-content h2 { font-size: 1.25em; }
    #payment-popup .account-info .account-number { font-size: 1.05rem; }
}